<!DOCTYPE html>
<html>
	<head>
		<title>Class reference, InvRef</title>
		<link rel="stylesheet" href="minetest.css">
		<script type="text/javascript" src="search.js"></script>
	</head>

	<body>
		<div>
			<table class="nav" style="width: 100%">
				<tr class="nav">
					<td style="text-align: left;" class="nav">
						<a href="index.html#contents">Contents</a>, <a href="full_index.html#Class_reference_InvRef">Index</a>
					</td>
					<td style="text-align: right;" class="nav">
						<input type="text" id="search_term" name="search_term" onkeydown="term_key ();">
					</td>
					<td style="text-align: right;" class="nav">
						<button type="button" onclick="search ();" id="searchbtn" name="searchbtn">Search</button>
					</td>
				</tr>
			</table>
		</div>

		<div id="search_results" style="display: none;" class="searchbg">
			<button type="button" onclick="hide_search_results ();" id="hide_results" name="hide_results">Hide</button>
			<div id="search_results_contents" class="search">
			</div>
		</div>

		<h1 id="InvRef">Class reference, InvRef</h1>
		<p>
An <code>InvRef</code> is a reference to an inventory.
		</p>
		<h2 id="Methods">Methods</h2>
			<ul>
				<li class="line1">
<code>is_empty(listname)</code>: return <code>true</code> if list is empty
				</li>
				<li class="line1">
<code>get_size(listname)</code>: get size of a list
				</li>
				<li class="line1">
<code>set_size(listname, size)</code>: set size of a list
				<ul>
					<li>
returns <code>false</code> on error (e.g. invalid <code>listname</code> or <code>size</code>)
					</li>
				</ul>
				</li>
				<li class="line1">
<code>get_width(listname)</code>: get width of a list
				</li>
				<li class="line1">
<code>set_width(listname, width)</code>: set width of list; currently used for crafting
				</li>
				<li class="line1">
<code>get_stack(listname, i)</code>: get a copy of stack index <code>i</code> in list
				</li>
				<li class="line1">
<code>set_stack(listname, i, stack)</code>: copy <code>stack</code> to index <code>i</code> in list
				</li>
				<li class="line1">
<code>get_list(listname)</code>: return full list
				</li>
				<li class="line1">
<code>set_list(listname, list)</code>: set full list (size will not change)
				</li>
				<li class="line1">
<code>get_lists()</code>: returns list of inventory lists
				</li>
				<li class="line1">
<code>set_lists(lists)</code>: sets inventory lists (size will not change)
				</li>
				<li class="line1">
<code>add_item(listname, stack)</code>: add item somewhere in list, returns leftover   <code>ItemStack</code>.
				</li>
				<li class="line1">
<code>room_for_item(listname, stack):</code> returns <code>true</code> if the stack of items   can be fully added to the list
				</li>
				<li class="line1">
<code>contains_item(listname, stack, [match_meta])</code>: returns <code>true</code> if   the stack of items can be fully taken from the list.   If <code>match_meta</code> is false, only the items' names are compared   (default: <code>false</code>).
				</li>
				<li class="line1">
<code>remove_item(listname, stack)</code>: take as many items as specified from the   list, returns the items that were actually removed (as an <code>ItemStack</code>)   -- note that any item metadata is ignored, so attempting to remove a specific   unique item this way will likely remove the wrong one -- to do that use   <code>set_stack</code> with an empty <code>ItemStack</code>.
				</li>
				<li class="line1">
<code>get_location()</code>: returns a location compatible to   <code>minetest.get_inventory(location)</code>.
				<ul>
					<li>
returns <code>{type="undefined"}</code> in case location is not known
					</li>
				</ul>
				</li>
			</ul>
		<h2 id="Callbacks">Callbacks</h2>
		<p>
Detached &amp; nodemeta inventories provide the following callbacks for move actions:
		</p>
		<h3 id="Before">Before</h3>
		<p>
The <code>allow_*</code> callbacks return how many items can be moved.
		</p>
			<ul>
				<li class="line1">
<code>allow_move</code>/<code>allow_metadata_inventory_move</code>: Moving items in the inventory
				</li>
				<li class="line1">
<code>allow_take</code>/<code>allow_metadata_inventory_take</code>: Taking items from the inventory
				</li>
				<li class="line1">
<code>allow_put</code>/<code>allow_metadata_inventory_put</code>: Putting items to the inventory
				</li>
			</ul>
		<h3 id="After">After</h3>
		<p>
The <code>on_*</code> callbacks are called after the items have been placed in the inventories.
		</p>
			<ul>
				<li class="line1">
<code>on_move</code>/<code>on_metadata_inventory_move</code>: Moving items in the inventory
				</li>
				<li class="line1">
<code>on_take</code>/<code>on_metadata_inventory_take</code>: Taking items from the inventory
				</li>
				<li class="line1">
<code>on_put</code>/<code>on_metadata_inventory_put</code>: Putting items to the inventory
				</li>
			</ul>
		<h3 id="Swapping">Swapping</h3>
		<p>
When a player tries to put an item to a place where another item is, the items are *swapped*. This means that all callbacks will be called twice (once for each action).
		</p>
		<p class="nav"><a href="index.html#contents">Contents</a>, <a href="full_index.html#Class_reference_InvRef">Index</a></p>
	</body>
</html>
